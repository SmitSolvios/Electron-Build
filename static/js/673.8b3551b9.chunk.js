"use strict";(self.webpackChunkbotiga_frontend=self.webpackChunkbotiga_frontend||[]).push([[673],{19673:function(e,a,s){s.r(a),s.d(a,{MixandMatch:function(){return S},default:function(){return T}});var l=s(42982),t=s(4942),c=s(1413),n=s(70885),i=s(72791),o=s(18622),r=s(92651),d=s(49392),m=s(79814),u=s(74569),h=s.n(u),x=function(){return new Promise((function(e,a){new Promise((function(e,a){h().get("/api/mixnmatch/list").then((function(a){e(a)})).catch((function(e){a(e)}))})).then((function(a){var s=[];a.data.result.forEach((function(e){s.push({value:e.mixNmatchId,label:e.priceGroupId+" --- "+e.description})})),e(s)})).catch((function(e){a(e)}))}))},p=s(52373),f=s(31815),j=s(43360),v=s(78820),b=s(80859),N=s(21830),Z=s.n(N),w=s(86850),y=s(10978),g=s(23805),C=s(8977),I={mixNmatchId:0,storeId:0,departmentId:0,priceGroupId:"",description:"",qtyRequired:0,amountToDiscount:0,startDate:(0,C.Z)(new Date,"yyyy-MM-dd'T'HH:mm'"),endDate:(0,C.Z)(new Date,"yyyy-MM-dd'T'HH:mm'"),priceGroupTypeId:1,isPerInvoice:!1,customerLimit:0,customerDays:0,taxList:[],isActive:!0,mnMProducts:[],discountLevels:[]},D=s(77020),G=s(43422),P=s(80184),S=function(){var e=[{value:1,label:"Discount Amount"},{value:2,label:"Bulk Price"}],a={amount:0,qty:0},s=(0,i.useState)([]),u=(0,n.Z)(s,2),N=u[0],C=u[1],S=(0,i.useState)([]),T=(0,n.Z)(S,2),q=T[0],k=T[1],L=(0,i.useState)([]),A=(0,n.Z)(L,2),F=A[0],M=A[1],B=(0,i.useState)(I),H=(0,n.Z)(B,2),E=H[0],R=H[1],V=(0,i.useState)(a),O=(0,n.Z)(V,2),Q=O[0],Y=O[1],$=(0,i.useState)(!1),_=(0,n.Z)($,2),z=_[0],J=_[1],K=(0,i.useState)(!1),U=(0,n.Z)(K,2),W=U[0],X=U[1],ee=(0,i.useState)([]),ae=(0,n.Z)(ee,2),se=ae[0],le=ae[1],te=(0,i.useState)([]),ce=(0,n.Z)(te,2),ne=ce[0],ie=ce[1],oe=(0,i.useState)([]),re=(0,n.Z)(oe,2),de=re[0],me=re[1],ue=(0,i.useState)(!1),he=(0,n.Z)(ue,2),xe=he[0],pe=he[1],fe=function(e){return function(e){return new Promise((function(a,s){h().get("/api/mixnmatch?id=".concat(e)).then((function(e){a(e)})).catch((function(e){s(e)}))}))}(e).then((function(e){R(e.data.result),le(e.data.result.mnMProducts),ie(e.data.result.discountLevels)})).catch((function(){}))},je=function(){return x().then((function(e){M(e)})).catch((function(){}))},ve=function(e,a){return R((0,c.Z)((0,c.Z)({},E),{},(0,t.Z)({},e,a)))},be=function(e,a){return Y((0,c.Z)((0,c.Z)({},Q),{},(0,t.Z)({},e,a)))};(0,i.useEffect)((function(){d.ke().then((function(e){C(e)})).catch((function(){})),m.bq().then((function(e){k(e[0])})).catch((function(){})),je()}),[]);var Ne=function(){R(I),le([]),ie([]),me([]),pe(!1)},Ze=function(){var e=Object.assign({},E);e.mnMProducts=se.map((function(e){return{productId:e.productId}})),e.discountLevels=ne.map((function(e){return e})),(0,G.PC)(E).validate(E,{abortEarly:!1}).then((function(a){var s;e.discountLevels.length||2!==e.priceGroupTypeId?e.mixNmatchId>0?(Z().showLoading(),(s=e,new Promise((function(e,a){h().put("/api/mixnmatch",s).then((function(a){e(a)})).catch((function(e){a(e)}))}))).then((function(e){Z().fire((0,c.Z)({title:"Price Group updated successfully."},D.Z.SwalGlobal)),fe(e.data.result.mixNmatchId)})).catch((function(e){Z().fire((0,c.Z)({title:"Error"},D.Z.SwalGlobal))}))):(Z().showLoading(),function(e){return new Promise((function(a,s){h().post("/api/mixnmatch",e).then((function(e){a(e)})).catch((function(e){s(e)}))}))}(e).then((function(e){Z().fire((0,c.Z)({title:"Price Group added successfully."},D.Z.SwalGlobal)),fe(e.data.result.mixNmatchId),je()})).catch((function(e){e.response.data.errors.hasOwnProperty("PriceGroupId")?Z().fire((0,c.Z)({title:e.response.data.errors.PriceGroupId[0]},D.Z.SwalGlobal)):Z().fire((0,c.Z)({title:"Error"},D.Z.SwalGlobal))}))):Z().fire((0,c.Z)({title:"Atleast 1 quantity is required for discount level!"},D.Z.SwalGlobal))})).catch((function(e){Z().fire((0,c.Z)({title:e.inner[0].message},D.Z.SwalGlobal))}))},we=function(){Z().fire((0,c.Z)({title:"Are you sure want to delete this record permanently,<br> It will remove all dependent data?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",preConfirm:function(){Z().showLoading(),Z().getTitle().hidden=!0,Z().getCancelButton().hidden=!0;var e,a=Object.assign({},E);return(e=a.mixNmatchId,new Promise((function(a,s){h().delete("/api/mixnmatch/".concat(e)).then((function(e){a(e)})).catch((function(e){s(e)}))}))).then((function(e){return Ne(),je(),Z().fire((0,c.Z)({title:"Mix N Match delete!"},D.Z.SwalGlobal)),!0})).catch((function(e){return Z().fire((0,c.Z)({title:e.inner[0].message},D.Z.SwalGlobal)),!0}))}},D.Z.SwalGlobalwithConfirm))};return(0,P.jsxs)("div",{id:"pos_view",className:"mixandmatch-page",children:[(0,P.jsxs)("div",{className:"depart-main-view",children:[(0,P.jsxs)("div",{className:"top-filter-row",children:[(0,P.jsx)("div",{className:"lt-title-bx",children:(0,P.jsxs)("h2",{children:[xe?"Edit ":"ADD ","Mix and Match"]})}),(0,P.jsxs)("div",{className:"rt-filter-bx filter-hd",children:[(0,P.jsx)("div",{className:"select-20",children:(0,P.jsx)(g.ZP,{className:"select-cm",options:F,value:F.filter((function(e){var a=e.value;return de.includes(a)})),onChange:function(e){null===e?Ne():(fe(e.value),me([e.value]),pe(!0))},placeholder:"Mix N Match"})}),(0,P.jsx)("div",{className:"row searchbar-mainview",children:(0,P.jsxs)("div",{className:"icons-list",children:[(0,P.jsx)("button",{className:"icons-hd-cm plus-icons",disabled:0===E.mixNmatchId,onClick:function(){Ne()}}),(0,P.jsx)("button",{className:"icons-hd-cm checks-icons",onClick:function(){Ze()}}),(0,P.jsx)("button",{className:"icons-hd-cm delete-icons",disabled:0===E.mixNmatchId,onClick:function(){we()}})]})})]})]}),(0,P.jsx)("hr",{className:"full-width"}),(0,P.jsx)("div",{className:"margin-depart table-cm mixandmatch-page",children:(0,P.jsx)("div",{className:"row",children:(0,P.jsxs)("div",{className:"col-md-12 standard-left",children:[(0,P.jsxs)("div",{className:"row min-row",children:[(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("label",{htmlFor:"Department",className:"col-sm-4 col-form-label",children:"Department"}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(o.ZP,{options:N,value:N.filter((function(e){return e.value===E.departmentId})),onChange:function(e){ve("departmentId",null===e?null:e.value)},className:"product-depatment"})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Price Group ID",(0,P.jsx)("span",{children:"*"})]}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)("input",{type:"text",name:"priceGroupId",placeholder:"Price Group ID",disabled:E.mixNmatchId>0,value:E.priceGroupId,onChange:function(e){ve(e.target.name,e.target.value)},className:"form-control",id:"priceGroupId"})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Description",(0,P.jsx)("span",{children:"*"})]}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:E.description,onChange:function(e){ve(e.target.name,e.target.value)},className:"form-control",id:"description"})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("label",{htmlFor:"Tax",className:"col-sm-4 col-form-label",children:"Price Group Type"}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(o.ZP,{options:e,value:e.filter((function(e){return e.value===E.priceGroupTypeId})),onChange:function(e){ve("priceGroupTypeId",null===e?null:e.value)},className:"product-depatment"})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Quantity Required",(0,P.jsx)("span",{children:"*"})]}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(p.Z,{className:"form-control",name:"qtyRequired",id:"qtyRequired","data-number-to-fixed":"5","data-number-stepfactor":"100",value:E.qtyRequired,placeholder:"",onValueChange:function(e){ve("qtyRequired",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0,disabled:1!==E.priceGroupTypeId})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Amount to Discount",(0,P.jsx)("span",{children:"*"})]}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(p.Z,{className:"form-control",prefix:"$",name:"cost",id:"cost","data-number-to-fixed":"5","data-number-stepfactor":"100",value:E.amountToDiscount,placeholder:"",onValueChange:function(e){ve("amountToDiscount",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0,disabled:1!==E.priceGroupTypeId})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("label",{htmlFor:"Tax",className:"col-sm-4 col-form-label",children:"Tax"}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(o.ZP,{isClearable:"false",isMulti:!0,value:q.filter((function(e){var a=e.value;return E.taxList.includes(a)})),options:q,onChange:function(e){var a=[];e.map((function(e){return a.push(e.value)})),R((0,c.Z)((0,c.Z)({},E),{},{taxList:a}))}})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"Start Date"}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(r.Z,{className:"data-picker-field data-picker-full",id:"datetime-local",value:(0,y.sQ)(E.startDate),type:"date",sx:{"& legend":{display:"none"},"& fieldset":{top:0}},onChange:function(e){ve("startDate",e.target.value)}})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"End Date"}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(r.Z,{className:"data-picker-field data-picker-full",id:"datetime-local",value:(0,y.sQ)(E.endDate),type:"date",sx:{"& legend":{display:"none"},"& fieldset":{top:0}},onChange:function(e){ve("endDate",e.target.value)}})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsx)("div",{className:"info-bx",children:(0,P.jsxs)("div",{className:"form-check",children:[(0,P.jsxs)("label",{className:"form-check-label",children:["Apply discounts only",(0,P.jsx)("br",{})," once per invoice"]}),(0,P.jsx)("input",{className:"form-check-input",onChange:function(e){ve("isPerInvoice",e.target.checked)},name:"idProofRequired1",checked:E.isPerInvoice,type:"checkbox"})]})})}),E.isPerInvoice?(0,P.jsx)(P.Fragment,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Customer Days",(0,P.jsx)("span",{children:"*"})]}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(p.Z,{className:"form-control",name:"customerDays",id:"customerDays","data-number-to-fixed":"5","data-number-stepfactor":"100",value:E.customerDays,placeholder:"",onValueChange:function(e){ve("customerDays",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0})})]})}),(0,P.jsx)("div",{className:"form-group col-md-4",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Customer Qty",(0,P.jsx)("span",{children:"*"})]}),(0,P.jsx)("div",{className:"col-md-8",children:(0,P.jsx)(p.Z,{className:"form-control",name:"customerLimit",id:"customerLimit","data-number-to-fixed":"5","data-number-stepfactor":"100",value:E.customerLimit,placeholder:"",onValueChange:function(e){ve("customerLimit",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0})})]})})]})]}),(0,P.jsx)("div",{className:"row min-row",children:(0,P.jsx)("div",{className:"col-md-12",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("div",{className:"col-md-7 item-in-group-table",children:[(0,P.jsxs)("div",{className:"btn-mixand-bx",children:[(0,P.jsx)("span",{className:"title-tab",children:"Product In Group"}),(0,P.jsx)("button",{className:"save-btn btn btn-save",onClick:function(){J(!0)},children:"Add Item"})]}),(0,P.jsx)("div",{className:"tabs-cm",children:(0,P.jsx)("div",{className:"table-sm table-cm",children:(0,P.jsx)("div",{className:"react-bootstrap-table",children:(0,P.jsxs)("table",{className:"table table-bordered",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Product barcode"}),(0,P.jsx)("th",{children:"Product description"}),(0,P.jsx)("th",{children:"Price"}),(0,P.jsx)("th",{children:"ACTION"})]})}),(0,P.jsx)("tbody",{children:se.length?se.map((function(e,a){return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:e.productCode}),(0,P.jsx)("td",{children:e.productName}),(0,P.jsx)("td",{children:(0,y.OH)(e.price)}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"action-btn",children:(0,P.jsx)("button",{className:"delete-icons",onClick:function(){!function(e){Z().fire((0,c.Z)({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},D.Z.SwalGlobalwithConfirm)).then((function(a){if(a.isConfirmed){var s=(0,l.Z)(se);s.splice(e,1),le(s)}else a.isDenied&&Z().close()}))}(a)}})})})]},a)})):(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:"4",style:{textAlign:"center"},children:(0,P.jsx)(w.FB,{text:"No Item"})})})})]})})})})]}),(0,P.jsxs)("div",{className:"col-md-5 "+(2===E.priceGroupTypeId?"":"Discount-Levels-Disable"),children:[(0,P.jsxs)("div",{className:"btn-mixand-bx",children:[(0,P.jsx)("span",{className:"title-tab",children:"Discount Levels"}),(0,P.jsx)("button",{className:"save-btn btn btn-save",disabled:2!==E.priceGroupTypeId,onClick:function(){X(!0)},children:"Add Discount Level"})]}),(0,P.jsx)("div",{className:"tabs-cm",children:(0,P.jsx)("div",{className:"table-sm table-cm",children:(0,P.jsx)("div",{className:"react-bootstrap-table",children:(0,P.jsxs)("table",{className:"table table-bordered",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Quantity"}),(0,P.jsx)("th",{children:"Amount"}),(0,P.jsx)("th",{children:"ACTION"})]})}),(0,P.jsx)("tbody",{children:ne.length?ne.map((function(e,a){return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:e.qty}),(0,P.jsx)("td",{children:(0,y.OH)(e.amount)}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"action-btn",children:(0,P.jsx)("button",{className:"delete-icons",onClick:function(){!function(e){Z().fire((0,c.Z)({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},D.Z.SwalGlobalwithConfirm)).then((function(a){if(a.isConfirmed){var s=(0,l.Z)(ne);s.splice(e,1),ie(s)}else a.isDenied&&Z().close()}))}(a)}})})})]},a)})):(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:"3",style:{textAlign:"center"},children:(0,P.jsx)(w.FB,{text:"No Item"})})})})]})})})})]})]})})})]})})})]}),(0,P.jsxs)(f.Z,{show:z,className:"inventory-popup select-products-popup cm-popup modal-lg inventory-fix-popup",children:[(0,P.jsx)(f.Z.Header,{children:(0,P.jsxs)(f.Z.Title,{children:[(0,P.jsx)("span",{children:"Select Products To Add"}),(0,P.jsx)(j.Z,{variant:"closepopup",onClick:function(){J(!1)},children:(0,P.jsx)(v.oHP,{style:{fontSize:"1.3020833333333333vw"}})})]})}),(0,P.jsx)(f.Z.Body,{children:(0,P.jsx)("div",{className:"popup-main-view-row",children:(0,P.jsx)("div",{className:"depart-main-view  table-cm",children:(0,P.jsx)(b.Z,{SelectedRow:function(e){if(se.filter((function(a){return a.productId===e.productId})).length>0)Z().fire((0,c.Z)({title:"Product already added!"},D.Z.SwalGlobal));else{var a=[].concat((0,l.Z)(se),[e]);le(a)}}})})})})]}),(0,P.jsxs)(f.Z,{show:W,onShow:function(){Y(a)},className:"cm-popup table-cm modal-lg",children:[(0,P.jsx)(f.Z.Header,{children:(0,P.jsxs)(f.Z.Title,{children:[(0,P.jsx)("span",{children:"Add Discount Level"}),(0,P.jsx)(j.Z,{variant:"closepopup",onClick:function(){X(!1)},children:(0,P.jsx)(v.oHP,{style:{fontSize:"1.3020833333333333vw"}})})]})}),(0,P.jsx)(f.Z.Body,{children:(0,P.jsxs)("div",{className:"container",children:[(0,P.jsx)("div",{className:"margin-popup"}),(0,P.jsxs)("div",{className:"row mb-0",children:[(0,P.jsx)("div",{className:"form-group col-md-6",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{className:"col-sm-5 col-form-label",children:["QTY",(0,P.jsx)("span",{className:"required",children:"*"})]}),(0,P.jsx)("div",{className:"col-md-7",children:(0,P.jsx)(p.Z,{className:"form-control",name:"qty",id:"qty",value:Q.qty,defaultValue:0,placeholder:"",onValueChange:function(e){be("qty",e)},allowDecimals:!0,decimalsLimit:"2"})})]})}),(0,P.jsx)("div",{className:"form-group col-md-6",children:(0,P.jsxs)("div",{className:"row",children:[(0,P.jsxs)("label",{className:"col-sm-5 col-form-label",children:["Amount",(0,P.jsx)("span",{className:"required",children:"*"})]}),(0,P.jsx)("div",{className:"col-md-7",children:(0,P.jsx)(p.Z,{className:"form-control",prefix:"$",name:"amount",id:"amount",value:Q.amount,defaultValue:0,placeholder:"",onValueChange:function(e){be("amount",e)},allowDecimals:!0,decimalsLimit:"2"})})]})})]}),(0,P.jsx)("div",{className:"margin-popup"})]})}),(0,P.jsx)(f.Z.Footer,{children:(0,P.jsx)(j.Z,{className:"save-btn",variant:"save",onClick:function(){ne.filter((function(e){return e.qty===Q.qty})).length?Z().fire((0,c.Z)({title:"Qty already added!"},D.Z.SwalGlobal)):0!==Q.qty?(0,G.j$)().validate(Q,{abortEarly:!1}).then((function(e){var a=[].concat((0,l.Z)(ne),[Q]);ie(a),X(!1)})).catch((function(e){e.inner.forEach((function(e){e.message})),Z().fire((0,c.Z)({title:e.inner[0].message},D.Z.SwalGlobal))})):Z().fire((0,c.Z)({title:"Atleast 1 quantity is required!"},D.Z.SwalGlobal))},children:"Save"})})]})]})},T=S}}]);
//# sourceMappingURL=673.8b3551b9.chunk.js.map