"use strict";(self.webpackChunkbotiga_frontend=self.webpackChunkbotiga_frontend||[]).push([[673],{19673:function(e,s,a){a.r(s),a.d(s,{MixandMatch:function(){return S},default:function(){return T}});var l=a(42982),c=a(4942),t=a(1413),n=a(70885),i=a(72791),o=a(18622),r=a(92651),d=a(49392),m=a(79814),u=a(74569),h=a.n(u),x=function(){return new Promise((function(e,s){new Promise((function(e,s){h().get("/api/mixnmatch/list").then((function(s){e(s)})).catch((function(e){s(e)}))})).then((function(s){var a=[];s.data.result.forEach((function(e){a.push({value:e.mixNmatchId,label:e.priceGroupId+" --- "+e.description})})),e(a)})).catch((function(e){s(e)}))}))},p=a(52373),f=a(31815),j=a(43360),v=a(78820),N=a(80859),b=a(21830),Z=a.n(b),w=a(86850),y=a(10978),g=a(23805),C=a(8977),I={mixNmatchId:0,storeId:0,departmentId:0,priceGroupId:"",description:"",qtyRequired:0,amountToDiscount:0,startDate:(0,C.Z)(new Date,"yyyy-MM-dd'T'HH:mm'"),endDate:(0,C.Z)(new Date,"yyyy-MM-dd'T'HH:mm'"),priceGroupTypeId:1,isPerInvoice:!1,customerLimit:0,customerDays:0,taxList:[],isActive:!0,mnMProducts:[],discountLevels:[]},D=a(77020),P=a(43422),G=a(80184),S=function(){var e=[{value:1,label:"Discount Amount"},{value:2,label:"Bulk Price"}],s={amount:0,qty:0},a=(0,i.useState)([]),u=(0,n.Z)(a,2),b=u[0],C=u[1],S=(0,i.useState)([]),T=(0,n.Z)(S,2),q=T[0],k=T[1],A=(0,i.useState)([]),L=(0,n.Z)(A,2),F=L[0],M=L[1],B=(0,i.useState)(I),H=(0,n.Z)(B,2),R=H[0],V=H[1],E=(0,i.useState)(s),O=(0,n.Z)(E,2),Q=O[0],Y=O[1],$=(0,i.useState)(!1),_=(0,n.Z)($,2),z=_[0],J=_[1],K=(0,i.useState)(!1),U=(0,n.Z)(K,2),W=U[0],X=U[1],ee=(0,i.useState)([]),se=(0,n.Z)(ee,2),ae=se[0],le=se[1],ce=(0,i.useState)([]),te=(0,n.Z)(ce,2),ne=te[0],ie=te[1],oe=(0,i.useState)([]),re=(0,n.Z)(oe,2),de=re[0],me=re[1],ue=(0,i.useState)(!1),he=(0,n.Z)(ue,2),xe=he[0],pe=he[1],fe=function(e){return function(e){return new Promise((function(s,a){h().get("/api/mixnmatch?id=".concat(e)).then((function(e){s(e)})).catch((function(e){a(e)}))}))}(e).then((function(e){V(e.data.result),le(e.data.result.mnMProducts),ie(e.data.result.discountLevels)})).catch((function(){}))},je=function(){return x().then((function(e){M(e)})).catch((function(){}))},ve=function(e,s){return V((0,t.Z)((0,t.Z)({},R),{},(0,c.Z)({},e,s)))},Ne=function(e,s){return Y((0,t.Z)((0,t.Z)({},Q),{},(0,c.Z)({},e,s)))};(0,i.useEffect)((function(){d.ke().then((function(e){C(e)})).catch((function(){})),m.bq().then((function(e){k(e[0])})).catch((function(){})),je()}),[]);var be=function(){V(I),le([]),ie([]),me([]),pe(!1)},Ze=function(){var e=Object.assign({},R);e.mnMProducts=ae.map((function(e){return{productId:e.productId}})),e.discountLevels=ne.map((function(e){return e})),(0,P.PC)(R).validate(R,{abortEarly:!1}).then((function(s){var a;e.discountLevels.length||2!==e.priceGroupTypeId?e.mixNmatchId>0?(a=e,new Promise((function(e,s){h().put("/api/mixnmatch",a).then((function(s){e(s)})).catch((function(e){s(e)}))}))).then((function(e){Z().fire((0,t.Z)({title:"Price Group updated successfully."},D.Z.SwalGlobal)),fe(e.data.result.mixNmatchId)})).catch((function(e){})):function(e){return new Promise((function(s,a){h().post("/api/mixnmatch",e).then((function(e){s(e)})).catch((function(e){a(e)}))}))}(e).then((function(e){Z().fire((0,t.Z)({title:"Price Group added successfully."},D.Z.SwalGlobal)),fe(e.data.result.mixNmatchId),je()})).catch((function(e){e.response.data.errors.hasOwnProperty("PriceGroupId")&&Z().fire((0,t.Z)({title:e.response.data.errors.PriceGroupId[0]},D.Z.SwalGlobal))})):Z().fire((0,t.Z)({title:"Atleast 1 quantity is required for discount level!"},D.Z.SwalGlobal))})).catch((function(e){Z().fire((0,t.Z)({title:e.inner[0].message},D.Z.SwalGlobal))}))},we=function(){Z().fire((0,t.Z)({title:"Are you sure want to delete this record permanently,<br> It will remove all dependent data?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},D.Z.SwalGlobalwithConfirm)).then((function(e){if(e.isConfirmed){var s=Object.assign({},R);(a=s.mixNmatchId,new Promise((function(e,s){h().delete("/api/mixnmatch/".concat(a)).then((function(s){e(s)})).catch((function(e){s(e)}))}))).then((function(e){be(),je(),Z().fire((0,t.Z)({title:"Mix N Match delete!"},D.Z.SwalGlobal))})).catch((function(e){Z().fire((0,t.Z)({title:e.inner[0].message},D.Z.SwalGlobal))}))}else e.isDenied&&Z().close();var a}))};return(0,G.jsxs)("div",{id:"pos_view",className:"mixandmatch-page",children:[(0,G.jsxs)("div",{className:"depart-main-view",children:[(0,G.jsxs)("div",{className:"top-filter-row",children:[(0,G.jsx)("div",{className:"lt-title-bx",children:(0,G.jsxs)("h2",{children:[xe?"Edit ":"ADD ","Mix and Match"]})}),(0,G.jsxs)("div",{className:"rt-filter-bx filter-hd",children:[(0,G.jsx)("div",{className:"select-20",children:(0,G.jsx)(g.ZP,{className:"select-cm",options:F,value:F.filter((function(e){var s=e.value;return de.includes(s)})),onChange:function(e){null===e?be():(fe(e.value),me([e.value]),pe(!0))},placeholder:"Mix N Match"})}),(0,G.jsx)("div",{className:"row searchbar-mainview",children:(0,G.jsxs)("div",{className:"icons-list",children:[(0,G.jsx)("button",{className:"icons-hd-cm plus-icons",disabled:0===R.mixNmatchId,onClick:function(){be()}}),(0,G.jsx)("button",{className:"icons-hd-cm checks-icons",onClick:function(){Ze()}}),(0,G.jsx)("button",{className:"icons-hd-cm delete-icons",disabled:0===R.mixNmatchId,onClick:function(){we()}})]})})]})]}),(0,G.jsx)("hr",{className:"full-width"}),(0,G.jsx)("div",{className:"margin-depart table-cm mixandmatch-page",children:(0,G.jsx)("div",{className:"row",children:(0,G.jsxs)("div",{className:"col-md-12 standard-left",children:[(0,G.jsxs)("div",{className:"row min-row",children:[(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsx)("label",{htmlFor:"Department",className:"col-sm-4 col-form-label",children:"Department"}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(o.ZP,{options:b,value:b.filter((function(e){return e.value===R.departmentId})),onChange:function(e){ve("departmentId",null===e?null:e.value)},className:"product-depatment"})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Price Group ID",(0,G.jsx)("span",{children:"*"})]}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)("input",{type:"text",name:"priceGroupId",placeholder:"Price Group ID",disabled:R.mixNmatchId>0,value:R.priceGroupId,onChange:function(e){ve(e.target.name,e.target.value)},className:"form-control",id:"priceGroupId"})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Description",(0,G.jsx)("span",{children:"*"})]}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:R.description,onChange:function(e){ve(e.target.name,e.target.value)},className:"form-control",id:"description"})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsx)("label",{htmlFor:"Tax",className:"col-sm-4 col-form-label",children:"Price Group Type"}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(o.ZP,{options:e,value:e.filter((function(e){return e.value===R.priceGroupTypeId})),onChange:function(e){ve("priceGroupTypeId",null===e?null:e.value)},className:"product-depatment"})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Quantity Required",(0,G.jsx)("span",{children:"*"})]}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(p.Z,{className:"form-control",name:"qtyRequired",id:"qtyRequired","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.qtyRequired,placeholder:"",onValueChange:function(e){ve("qtyRequired",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0,disabled:1!==R.priceGroupTypeId})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Amount to Discount",(0,G.jsx)("span",{children:"*"})]}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(p.Z,{className:"form-control",prefix:"$",name:"cost",id:"cost","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.amountToDiscount,placeholder:"",onValueChange:function(e){ve("amountToDiscount",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0,disabled:1!==R.priceGroupTypeId})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsx)("label",{htmlFor:"Tax",className:"col-sm-4 col-form-label",children:"Tax"}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(o.ZP,{isClearable:"false",isMulti:!0,value:q.filter((function(e){var s=e.value;return R.taxList.includes(s)})),options:q,onChange:function(e){var s=[];e.map((function(e){return s.push(e.value)})),V((0,t.Z)((0,t.Z)({},R),{},{taxList:s}))}})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"Start Date"}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(r.Z,{className:"data-picker-field data-picker-full",id:"datetime-local",value:(0,y.sQ)(R.startDate),type:"date",sx:{"& legend":{display:"none"},"& fieldset":{top:0}},onChange:function(e){ve("startDate",e.target.value)}})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"End Date"}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(r.Z,{className:"data-picker-field data-picker-full",id:"datetime-local",value:(0,y.sQ)(R.endDate),type:"date",sx:{"& legend":{display:"none"},"& fieldset":{top:0}},onChange:function(e){ve("endDate",e.target.value)}})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsx)("div",{className:"info-bx",children:(0,G.jsxs)("div",{className:"form-check",children:[(0,G.jsxs)("label",{className:"form-check-label",children:["Apply discounts only",(0,G.jsx)("br",{})," once per invoice"]}),(0,G.jsx)("input",{className:"form-check-input",onChange:function(e){ve("isPerInvoice",e.target.checked)},name:"idProofRequired1",checked:R.isPerInvoice,type:"checkbox"})]})})}),R.isPerInvoice?(0,G.jsx)(G.Fragment,{}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Customer Days",(0,G.jsx)("span",{children:"*"})]}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(p.Z,{className:"form-control",name:"customerDays",id:"customerDays","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.customerDays,placeholder:"",onValueChange:function(e){ve("customerDays",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0})})]})}),(0,G.jsx)("div",{className:"form-group col-md-4",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Customer Qty",(0,G.jsx)("span",{children:"*"})]}),(0,G.jsx)("div",{className:"col-md-8",children:(0,G.jsx)(p.Z,{className:"form-control",name:"customerLimit",id:"customerLimit","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.customerLimit,placeholder:"",onValueChange:function(e){ve("customerLimit",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0})})]})})]})]}),(0,G.jsx)("div",{className:"row min-row",children:(0,G.jsx)("div",{className:"col-md-12",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("div",{className:"col-md-7 item-in-group-table",children:[(0,G.jsxs)("div",{className:"btn-mixand-bx",children:[(0,G.jsx)("span",{className:"title-tab",children:"Product In Group"}),(0,G.jsx)("button",{className:"save-btn btn btn-save",onClick:function(){J(!0)},children:"Add Item"})]}),(0,G.jsx)("div",{className:"tabs-cm",children:(0,G.jsx)("div",{className:"table-sm table-cm",children:(0,G.jsx)("div",{className:"react-bootstrap-table",children:(0,G.jsxs)("table",{className:"table table-bordered",children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{children:"Product barcode"}),(0,G.jsx)("th",{children:"Product description"}),(0,G.jsx)("th",{children:"Price"}),(0,G.jsx)("th",{children:"ACTION"})]})}),(0,G.jsx)("tbody",{children:ae.length?ae.map((function(e,s){return(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{children:e.productCode}),(0,G.jsx)("td",{children:e.productName}),(0,G.jsx)("td",{children:(0,y.OH)(e.price)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"action-btn",children:(0,G.jsx)("button",{className:"delete-icons",onClick:function(){!function(e){Z().fire((0,t.Z)({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},D.Z.SwalGlobalwithConfirm)).then((function(s){if(s.isConfirmed){var a=(0,l.Z)(ae);a.splice(e,1),le(a)}else s.isDenied&&Z().close()}))}(s)}})})})]},s)})):(0,G.jsx)("tr",{children:(0,G.jsx)("td",{colSpan:"4",style:{textAlign:"center"},children:(0,G.jsx)(w.FB,{text:"No Item"})})})})]})})})})]}),(0,G.jsxs)("div",{className:"col-md-5 "+(2===R.priceGroupTypeId?"":"Discount-Levels-Disable"),children:[(0,G.jsxs)("div",{className:"btn-mixand-bx",children:[(0,G.jsx)("span",{className:"title-tab",children:"Discount Levels"}),(0,G.jsx)("button",{className:"save-btn btn btn-save",disabled:2!==R.priceGroupTypeId,onClick:function(){X(!0)},children:"Add Discount Level"})]}),(0,G.jsx)("div",{className:"tabs-cm",children:(0,G.jsx)("div",{className:"table-sm table-cm",children:(0,G.jsx)("div",{className:"react-bootstrap-table",children:(0,G.jsxs)("table",{className:"table table-bordered",children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{children:"Quantity"}),(0,G.jsx)("th",{children:"Amount"}),(0,G.jsx)("th",{children:"ACTION"})]})}),(0,G.jsx)("tbody",{children:ne.length?ne.map((function(e,s){return(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{children:e.qty}),(0,G.jsx)("td",{children:(0,y.OH)(e.amount)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"action-btn",children:(0,G.jsx)("button",{className:"delete-icons",onClick:function(){!function(e){Z().fire((0,t.Z)({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},D.Z.SwalGlobalwithConfirm)).then((function(s){if(s.isConfirmed){var a=(0,l.Z)(ne);a.splice(e,1),ie(a)}else s.isDenied&&Z().close()}))}(s)}})})})]},s)})):(0,G.jsx)("tr",{children:(0,G.jsx)("td",{colSpan:"3",style:{textAlign:"center"},children:(0,G.jsx)(w.FB,{text:"No Item"})})})})]})})})})]})]})})})]})})})]}),(0,G.jsxs)(f.Z,{show:z,className:"inventory-popup select-products-popup cm-popup modal-lg inventory-fix-popup",children:[(0,G.jsx)(f.Z.Header,{children:(0,G.jsxs)(f.Z.Title,{children:[(0,G.jsx)("span",{children:"Select Products To Add"}),(0,G.jsx)(j.Z,{variant:"closepopup",onClick:function(){J(!1)},children:(0,G.jsx)(v.oHP,{style:{fontSize:"1.3020833333333333vw"}})})]})}),(0,G.jsx)(f.Z.Body,{children:(0,G.jsx)("div",{className:"popup-main-view-row",children:(0,G.jsx)("div",{className:"depart-main-view  table-cm",children:(0,G.jsx)(N.Z,{SelectedRow:function(e){if(ae.filter((function(s){return s.productId===e.productId})).length>0)Z().fire((0,t.Z)({title:"Product already added!"},D.Z.SwalGlobal));else{var s=[].concat((0,l.Z)(ae),[e]);le(s)}}})})})})]}),(0,G.jsxs)(f.Z,{show:W,onShow:function(){Y(s)},className:"cm-popup table-cm modal-lg",children:[(0,G.jsx)(f.Z.Header,{children:(0,G.jsxs)(f.Z.Title,{children:[(0,G.jsx)("span",{children:"Add Discount Level"}),(0,G.jsx)(j.Z,{variant:"closepopup",onClick:function(){X(!1)},children:(0,G.jsx)(v.oHP,{style:{fontSize:"1.3020833333333333vw"}})})]})}),(0,G.jsx)(f.Z.Body,{children:(0,G.jsxs)("div",{className:"container",children:[(0,G.jsx)("div",{className:"margin-popup"}),(0,G.jsxs)("div",{className:"row mb-0",children:[(0,G.jsx)("div",{className:"form-group col-md-6",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{className:"col-sm-5 col-form-label",children:["QTY",(0,G.jsx)("span",{className:"required",children:"*"})]}),(0,G.jsx)("div",{className:"col-md-7",children:(0,G.jsx)(p.Z,{className:"form-control",name:"qty",id:"qty",value:Q.qty,defaultValue:0,placeholder:"",onValueChange:function(e){Ne("qty",e)},allowDecimals:!0,decimalsLimit:"2"})})]})}),(0,G.jsx)("div",{className:"form-group col-md-6",children:(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("label",{className:"col-sm-5 col-form-label",children:["Amount",(0,G.jsx)("span",{className:"required",children:"*"})]}),(0,G.jsx)("div",{className:"col-md-7",children:(0,G.jsx)(p.Z,{className:"form-control",prefix:"$",name:"amount",id:"amount",value:Q.amount,defaultValue:0,placeholder:"",onValueChange:function(e){Ne("amount",e)},allowDecimals:!0,decimalsLimit:"2"})})]})})]}),(0,G.jsx)("div",{className:"margin-popup"})]})}),(0,G.jsx)(f.Z.Footer,{children:(0,G.jsx)(j.Z,{className:"save-btn",variant:"save",onClick:function(){ne.filter((function(e){return e.qty===Q.qty})).length?Z().fire((0,t.Z)({title:"Qty already added!"},D.Z.SwalGlobal)):0!==Q.qty?(0,P.j$)().validate(Q,{abortEarly:!1}).then((function(e){var s=[].concat((0,l.Z)(ne),[Q]);ie(s),X(!1)})).catch((function(e){e.inner.forEach((function(e){e.message})),Z().fire((0,t.Z)({title:e.inner[0].message},D.Z.SwalGlobal))})):Z().fire((0,t.Z)({title:"Atleast 1 quantity is required!"},D.Z.SwalGlobal))},children:"Save"})})]})]})},T=S}}]);
//# sourceMappingURL=673.fc143f13.chunk.js.map