"use strict";(self.webpackChunkbotiga_frontend=self.webpackChunkbotiga_frontend||[]).push([[673],{9673:function(e,s,a){a.r(s),a.d(s,{MixandMatch:function(){return k},default:function(){return S}});var c=a(2982),l=a(4942),n=a(1413),t=a(885),i=a(2791),o=a(8622),r=a(2651),d=a(9392),m=a(9814),u=a(4569),h=a.n(u),x=function(){return new Promise((function(e,s){new Promise((function(e,s){h().get("/api/mixnmatch/list").then((function(s){e(s)})).catch((function(e){s(e)}))})).then((function(s){var a=[];s.data.result.forEach((function(e){a.push({value:e.mixNmatchId,label:e.priceGroupId+" --- "+e.description})})),e(a)})).catch((function(e){s(e)}))}))},f=a(2373),p=a(8573),j=a(3360),v=a(8820),N=a(859),b=a(1830),y=a.n(b),w=a(6850),Z=a(978),g=a(3805),C=a(8977),I={mixNmatchId:0,storeId:0,departmentId:0,priceGroupId:"",description:"",qtyRequired:0,amountToDiscount:0,startDate:(0,C.Z)(new Date,"yyyy-MM-dd'T'HH:mm'"),endDate:(0,C.Z)(new Date,"yyyy-MM-dd'T'HH:mm'"),priceGroupTypeId:1,isPerInvoice:!1,customerLimit:0,customerDays:0,taxList:[],isActive:!0,mnMProducts:[],discountLevels:[]},D=a(7020),P=a(3422),T=a(184),k=function(){var e=[{value:1,label:"Discount Amout"},{value:2,label:"Bulk Price"}],s={amount:0,qty:0},a=(0,i.useState)([]),u=(0,t.Z)(a,2),b=u[0],C=u[1],k=(0,i.useState)([]),S=(0,t.Z)(k,2),G=S[0],A=S[1],q=(0,i.useState)([]),L=(0,t.Z)(q,2),F=L[0],B=L[1],M=(0,i.useState)(I),H=(0,t.Z)(M,2),R=H[0],V=H[1],E=(0,i.useState)(s),O=(0,t.Z)(E,2),Q=O[0],Y=O[1],$=(0,i.useState)(!1),_=(0,t.Z)($,2),z=_[0],J=_[1],K=(0,i.useState)(!1),U=(0,t.Z)(K,2),W=U[0],X=U[1],ee=(0,i.useState)([]),se=(0,t.Z)(ee,2),ae=se[0],ce=se[1],le=(0,i.useState)([]),ne=(0,t.Z)(le,2),te=ne[0],ie=ne[1],oe=(0,i.useState)([]),re=(0,t.Z)(oe,2),de=re[0],me=re[1],ue=(0,i.useState)(!1),he=(0,t.Z)(ue,2),xe=he[0],fe=he[1],pe=function(e){return function(e){return new Promise((function(s,a){h().get("/api/mixnmatch?id=".concat(e)).then((function(e){s(e)})).catch((function(e){a(e)}))}))}(e).then((function(e){V(e.data.result),ce(e.data.result.mnMProducts),ie(e.data.result.discountLevels)})).catch((function(){}))},je=function(){return x().then((function(e){B(e)})).catch((function(){}))},ve=function(e,s){return V((0,n.Z)((0,n.Z)({},R),{},(0,l.Z)({},e,s)))},Ne=function(e,s){return Y((0,n.Z)((0,n.Z)({},Q),{},(0,l.Z)({},e,s)))};(0,i.useEffect)((function(){d.ke().then((function(e){C(e)})).catch((function(){})),m.bq().then((function(e){A(e[0])})).catch((function(){})),je()}),[]);var be=function(){V(I),ce([]),ie([]),me([]),fe(!1)},ye=function(){var e=Object.assign({},R);e.mnMProducts=ae.map((function(e){return{productId:e.productId}})),e.discountLevels=te.map((function(e){return e})),(0,P.PC)(R).validate(R,{abortEarly:!1}).then((function(s){var a;e.mixNmatchId>0?(a=e,new Promise((function(e,s){h().put("/api/mixnmatch",a).then((function(s){e(s)})).catch((function(e){s(e)}))}))).then((function(e){y().fire((0,n.Z)({title:"Product updated successfully."},D.Z.SwalGlobal)),pe(e.data.result.mixNmatchId)})).catch((function(e){})):function(e){return new Promise((function(s,a){h().post("/api/mixnmatch",e).then((function(e){s(e)})).catch((function(e){a(e)}))}))}(e).then((function(e){y().fire((0,n.Z)({title:"Product Added successfully."},D.Z.SwalGlobal)),pe(e.data.result.mixNmatchId)})).catch((function(e){e.response.data.errors.hasOwnProperty("PriceGroupId")&&y().fire((0,n.Z)({title:e.response.data.errors.PriceGroupId[0]},D.Z.SwalGlobal))}))})).catch((function(e){y().fire((0,n.Z)({title:e.inner[0].message},D.Z.SwalGlobal))}))},we=function(){y().fire({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(e){if(e.isConfirmed){var s=Object.assign({},R);(a=s.mixNmatchId,new Promise((function(e,s){h().delete("/api/mixnmatch/".concat(a)).then((function(s){e(s)})).catch((function(e){s(e)}))}))).then((function(e){be(),je()})).catch((function(e){y().fire((0,n.Z)({title:e.inner[0].message},D.Z.SwalGlobal))}))}else e.isDenied&&y().close();var a}))};return(0,T.jsxs)("div",{id:"pos_view",children:[(0,T.jsxs)("div",{className:"depart-main-view",children:[(0,T.jsxs)("div",{className:"top-filter-row",children:[(0,T.jsx)("div",{className:"lt-title-bx",children:(0,T.jsxs)("h2",{children:[xe?"Edit ":"ADD ","Mix and Match"]})}),(0,T.jsxs)("div",{className:"rt-filter-bx filter-hd",children:[(0,T.jsx)(g.ZP,{className:"select-cm",options:F,value:F.filter((function(e){var s=e.value;return de.includes(s)})),onChange:function(e){null===e?be():(pe(e.value),me([e.value]),fe(!0))},placeholder:"Mix N Match"}),(0,T.jsx)("div",{className:"row searchbar-mainview",children:(0,T.jsxs)("div",{className:"icons-list",children:[(0,T.jsx)("button",{className:"icons-hd-cm plus-icons",disabled:0===R.mixNmatchId,onClick:function(){be()}}),(0,T.jsx)("button",{className:"icons-hd-cm checks-icons",onClick:function(){ye()}}),(0,T.jsx)("button",{className:"icons-hd-cm delete-icons",disabled:0===R.mixNmatchId,onClick:function(){we()}})]})})]})]}),(0,T.jsx)("hr",{className:"full-width"}),(0,T.jsx)("div",{className:"margin-depart table-cm mixandmatch-page",children:(0,T.jsx)("div",{className:"row",children:(0,T.jsxs)("div",{className:"col-md-12 standard-left",children:[(0,T.jsxs)("div",{className:"row min-row",children:[(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"Department",className:"col-sm-4 col-form-label",children:"Department"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(o.ZP,{options:b,value:b.filter((function(e){return e.value===R.departmentId})),onChange:function(e){ve("departmentId",null===e?null:e.value)},className:"product-depatment"})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Price Group ID",(0,T.jsx)("span",{children:"*"})]}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)("input",{type:"text",name:"priceGroupId",placeholder:"Price Group ID",disabled:R.mixNmatchId>0,value:R.priceGroupId,onChange:function(e){ve(e.target.name,e.target.value)},className:"form-control",id:"priceGroupId"})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Description",(0,T.jsx)("span",{children:"*"})]}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:R.description,onChange:function(e){ve(e.target.name,e.target.value)},className:"form-control",id:"description"})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"Tax",className:"col-sm-4 col-form-label",children:"Price Group Type"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(o.ZP,{options:e,value:e.filter((function(e){return e.value===R.priceGroupTypeId})),onChange:function(e){ve("priceGroupTypeId",null===e?null:e.value)},className:"product-depatment"})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"Quantity Required"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(f.Z,{className:"form-control",name:"qtyRequired",id:"qtyRequired","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.qtyRequired,placeholder:"",onValueChange:function(e){ve("qtyRequired",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0,disabled:1!==R.priceGroupTypeId})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"Amount to Discount"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(f.Z,{className:"form-control",prefix:"$",name:"cost",id:"cost","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.amountToDiscount,placeholder:"",onValueChange:function(e){ve("amountToDiscount",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0,disabled:1!==R.priceGroupTypeId})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"Tax",className:"col-sm-4 col-form-label",children:"Tax"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(o.ZP,{isClearable:"false",isMulti:!0,value:G.filter((function(e){var s=e.value;return R.taxList.includes(s)})),options:G,onChange:function(e){var s=[];e.map((function(e){return s.push(e.value)})),V((0,n.Z)((0,n.Z)({},R),{},{taxList:s}))}})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"Start Date"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(r.Z,{className:"data-picker-field data-picker-full",id:"datetime-local",value:(0,Z.sQ)(R.startDate),type:"date",sx:{"& legend":{display:"none"},"& fieldset":{top:0}},onChange:function(e){ve("startDate",e.target.value)}})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:"End Date"}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(r.Z,{className:"data-picker-field data-picker-full",id:"datetime-local",value:(0,Z.sQ)(R.endDate),type:"date",sx:{"& legend":{display:"none"},"& fieldset":{top:0}},onChange:function(e){ve("endDate",e.target.value)}})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsx)("div",{className:"info-bx",children:(0,T.jsxs)("div",{className:"form-check",children:[(0,T.jsxs)("label",{className:"form-check-label",children:["Apply discounts only",(0,T.jsx)("br",{})," once per invoice"]}),(0,T.jsx)("input",{className:"form-check-input",onChange:function(e){ve("isPerInvoice",e.target.checked)},name:"idProofRequired1",checked:R.isPerInvoice,type:"checkbox"})]})})}),R.isPerInvoice?(0,T.jsx)(T.Fragment,{}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Customer Days",(0,T.jsx)("span",{children:"*"})]}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(f.Z,{className:"form-control",name:"customerDays",id:"customerDays","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.customerDays,placeholder:"",onValueChange:function(e){ve("customerDays",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0})})]})}),(0,T.jsx)("div",{className:"form-group col-md-4",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("label",{htmlFor:"productCode",className:"col-sm-4 col-form-label",children:["Customer Qty",(0,T.jsx)("span",{children:"*"})]}),(0,T.jsx)("div",{className:"col-md-8",children:(0,T.jsx)(f.Z,{className:"form-control",name:"customerLimit",id:"customerLimit","data-number-to-fixed":"5","data-number-stepfactor":"100",value:R.customerLimit,placeholder:"",onValueChange:function(e){ve("customerLimit",e)},allowDecimals:!0,decimalsLimit:"5",disableAbbreviations:!0})})]})})]})]}),(0,T.jsx)("div",{className:"row min-row",children:(0,T.jsx)("div",{className:"col-md-12",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("div",{className:"col-md-7 item-in-group-table",children:[(0,T.jsxs)("div",{className:"btn-mixand-bx",children:[(0,T.jsx)("span",{className:"title-tab",children:"Item in Group"}),(0,T.jsx)("button",{className:"save-btn btn btn-save",onClick:function(){J(!0)},children:"Add Item"})]}),(0,T.jsx)("div",{className:"tabs-cm",children:(0,T.jsx)("div",{className:"table-sm table-cm",children:(0,T.jsx)("div",{className:"react-bootstrap-table",children:(0,T.jsxs)("table",{className:"table table-bordered",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{children:"Item Number"}),(0,T.jsx)("th",{children:"Item Name"}),(0,T.jsx)("th",{children:"Price"}),(0,T.jsx)("th",{children:"ACTION"})]})}),(0,T.jsx)("tbody",{children:ae.length?ae.map((function(e,s){return(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{children:e.productCode}),(0,T.jsx)("td",{children:e.productName}),(0,T.jsx)("td",{children:(0,Z.OH)(e.price)}),(0,T.jsx)("td",{children:(0,T.jsx)("div",{className:"action-btn",children:(0,T.jsx)("button",{className:"delete-icons",onClick:function(){!function(e){y().fire({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(s){if(s.isConfirmed){var a=(0,c.Z)(ae);a.splice(e,1),ce(a)}else s.isDenied&&y().close()}))}(s)}})})})]},s)})):(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:"4",style:{textAlign:"center"},children:(0,T.jsx)(w.FB,{text:"No Item"})})})})]})})})})]}),(0,T.jsxs)("div",{className:"col-md-5 "+(2===R.priceGroupTypeId?"":"Discount-Levels-Disable"),children:[(0,T.jsxs)("div",{className:"btn-mixand-bx",children:[(0,T.jsx)("span",{className:"title-tab",children:"Discount Levels"}),(0,T.jsx)("button",{className:"save-btn btn btn-save",disabled:2!==R.priceGroupTypeId,onClick:function(){X(!0)},children:"Add Discount Level"})]}),(0,T.jsx)("div",{className:"tabs-cm",children:(0,T.jsx)("div",{className:"table-sm table-cm",children:(0,T.jsx)("div",{className:"react-bootstrap-table",children:(0,T.jsxs)("table",{className:"table table-bordered",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{children:"Quantity"}),(0,T.jsx)("th",{children:"Amount"}),(0,T.jsx)("th",{children:"ACTION"})]})}),(0,T.jsx)("tbody",{children:te.length?te.map((function(e,s){return(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{children:e.qty}),(0,T.jsx)("td",{children:(0,Z.OH)(e.amount)}),(0,T.jsx)("td",{children:(0,T.jsx)("div",{className:"action-btn",children:(0,T.jsx)("button",{className:"delete-icons",onClick:function(){!function(e){y().fire({title:"Are you sure you want to delete?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(s){if(s.isConfirmed){var a=(0,c.Z)(te);a.splice(e,1),ie(a)}else s.isDenied&&y().close()}))}(s)}})})})]},s)})):(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:"3",style:{textAlign:"center"},children:(0,T.jsx)(w.FB,{text:"No Item"})})})})]})})})})]})]})})})]})})})]}),(0,T.jsxs)(p.Z,{show:z,className:"inventory-popup select-products-popup cm-popup modal-lg inventory-fix-popup",children:[(0,T.jsx)(p.Z.Header,{children:(0,T.jsxs)(p.Z.Title,{children:[(0,T.jsx)("span",{children:"Select Products To Add"}),(0,T.jsx)(j.Z,{variant:"closepopup",onClick:function(){J(!1)},children:(0,T.jsx)(v.oHP,{style:{fontSize:"1.3020833333333333vw"}})})]})}),(0,T.jsx)(p.Z.Body,{children:(0,T.jsx)("div",{className:"popup-main-view-row",children:(0,T.jsx)("div",{className:"depart-main-view  table-cm",children:(0,T.jsx)(N.Z,{SelectedRow:function(e){if(ae.filter((function(s){return s.productId===e.productId})).length>0)y().fire((0,n.Z)({title:"Product already added!"},D.Z.SwalGlobal));else{var s=[].concat((0,c.Z)(ae),[e]);ce(s)}}})})})})]}),(0,T.jsxs)(p.Z,{show:W,onShow:function(){Y(s)},className:"cm-popup table-cm modal-lg",children:[(0,T.jsx)(p.Z.Header,{children:(0,T.jsxs)(p.Z.Title,{children:[(0,T.jsx)("span",{children:"Add Discount Level"}),(0,T.jsx)(j.Z,{variant:"closepopup",onClick:function(){X(!1)},children:(0,T.jsx)(v.oHP,{style:{fontSize:"1.3020833333333333vw"}})})]})}),(0,T.jsx)(p.Z.Body,{children:(0,T.jsxs)("div",{className:"container",children:[(0,T.jsx)("div",{className:"margin-popup"}),(0,T.jsxs)("div",{className:"row mb-0",children:[(0,T.jsx)("div",{className:"form-group col-md-6",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("label",{className:"col-sm-5 col-form-label",children:["Amount",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)("div",{className:"col-md-7",children:(0,T.jsx)(f.Z,{className:"form-control",prefix:"$",name:"amount",id:"amount",value:Q.amount,defaultValue:0,placeholder:"",onValueChange:function(e){Ne("amount",e)},allowDecimals:!0,decimalsLimit:"2"})})]})}),(0,T.jsx)("div",{className:"form-group col-md-6",children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("label",{className:"col-sm-5 col-form-label",children:["QTY",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)("div",{className:"col-md-7",children:(0,T.jsx)(f.Z,{className:"form-control",name:"qty",id:"qty",value:Q.qty,defaultValue:0,placeholder:"",onValueChange:function(e){Ne("qty",e)},allowDecimals:!0,decimalsLimit:"2"})})]})})]}),(0,T.jsx)("div",{className:"margin-popup"})]})}),(0,T.jsx)(p.Z.Footer,{children:(0,T.jsx)(j.Z,{className:"save-btn",variant:"save",onClick:function(){(0,P.j$)().validate(Q,{abortEarly:!1}).then((function(e){var s=[].concat((0,c.Z)(te),[Q]);ie(s),X(!1)})).catch((function(e){e.inner.forEach((function(e){e.message})),y().fire((0,n.Z)({title:e.inner[0].message},D.Z.SwalGlobal))}))},children:"Save"})})]})]})},S=k}}]);
//# sourceMappingURL=673.04b15488.chunk.js.map